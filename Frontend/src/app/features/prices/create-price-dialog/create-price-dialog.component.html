<h2 mat-dialog-title>Nueva Lista de Precios</h2>
<mat-dialog-content class="dialog-content">
  <!-- Ac치 ir치 el formulario -->
  <form [formGroup]="formPriceList" class="form-section">

    <mat-form-field appearance="outline">
      <mat-label>Nombre:</mat-label>
      <input matInput formControlName="name">
    </mat-form-field>

    <div class="form-row">

      <mat-form-field appearance="outline">
        <mat-label>Ganancia</mat-label>
        <input matInput type="number" min="0" formControlName="profit">
        <span matTextPrefix>$</span>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-form-field appearance="outline">
        <mat-label>Comisi칩n</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="commission">
        <mat-hint>porcentaje</mat-hint>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Recargo Correlon</mat-label>
        <input matInput type="number" step="0.01" min="0" formControlName="corralon">
        <mat-hint>porcentaje</mat-hint>
      </mat-form-field>
    </div>
    <div class="form-row">
      <mat-radio-group aria-label="Seleccionar tipo de volumen" formControlName="volKm" class="radio-group">
        <mat-radio-button value="ZERO">0Km</mat-radio-button>
        <mat-radio-button value="CIEN">Vol 100Km</mat-radio-button>
        <mat-radio-button value="DOSCIENTOS">Vol 200Km</mat-radio-button>
      </mat-radio-group>
    </div>
  </form>
  <h3>Vista Previa de los precios</h3>
  <div class="preview-section">
    <p>
      <code>
        [(Costo del tanque + <b>Ganancia</b>) x <b>Comisi칩n</b>] + (<b>recargo Corralon</b> x <b>Ganancia</b>)
        @if (Km) {
          + volumen del tanque
        }
        = Precio final
      </code>
    </p>
    <mat-divider></mat-divider>
    <p>
      <code>
        [({{ 76000|currency }} + <b>{{ profit|currency }}</b>) x <b>{{ commission }}</b>] + (<b>{{ corralon }}</b> x
        <b>{{ profit|currency }}</b>)
        @if (Km) {
          @if (this.formPriceList.get('volKm')?.value === "CIEN") {
            + {{ 2100|currency }}
          } @else {
            + {{ 4200|currency }}
          }
        }
        = {{ finalPrice|currency }}
      </code>
    </p>
  </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <app-faq [faq]="FAQ"></app-faq>
  <button mat-button (click)="close()">Cancelar</button>
  <button mat-button color="primary" (click)="submit()" [disabled]="formPriceList.invalid||isLoading">
    @if (isLoading) {
      <mat-spinner diameter="20"></mat-spinner>
    } @else {
      Guardar
    }

  </button>
</mat-dialog-actions>
