<mat-card class="tank-list-card" appearance="outlined">
  <div class="custom-card-header">
    <div>
      <h2 class="title">Clientes</h2>
      <p class="subtitle">Gesti√≥n y carga de clientes</p>
    </div>
<!--    <app-faq [faq]="FAQ"></app-faq>-->
  </div>

  <form [formGroup]="clientForm" (ngSubmit)="save()" class="client-form">
    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput minlength="3" maxlength="50" formControlName="name">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Telefono</mat-label>
      <input matInput type="tel" formControlName="telephone">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Direccion</mat-label>
      <input matInput type="tel" formControlName="direction">
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Lista de precios</mat-label>
      <mat-select formControlName="priceListId">
        @for (priceList of priceList; track $index) {
          <mat-option [value]="priceList.id">{{ priceList.name }}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <div class="form-buttons">
      @if (isUpdating) {
        <button mat-mini-fab color="primary" type="submit" class="example-icon"
                [disabled]="clientForm.invalid||isLoading">
          @if (isLoading) {
            <mat-spinner diameter="20"></mat-spinner>
          } @else {
            <mat-icon>check</mat-icon>
          }
        </button>
        <button mat-mini-fab type="button" class="example-icon" (click)="cancelEditing()">
          <mat-icon>close</mat-icon>
        </button>
      } @else {
        <button mat-mini-fab color="primary" type="submit" class="example-icon"
                [disabled]="clientForm.invalid||isLoading">
          @if (isLoading) {
            <mat-spinner diameter="20"></mat-spinner>
          } @else {
            <mat-icon>add</mat-icon>
          }
        </button>
      }
    </div>
  </form>
  <mat-divider></mat-divider>
  <mat-card-content>
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
        <td mat-cell *matCellDef="let client">
          {{ client.name }}
        </td>
      </ng-container>
      <ng-container matColumnDef="telephone">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Telefono</th>
        <td mat-cell *matCellDef="let client">
          {{ client.telephone }}
        </td>
      </ng-container>
      <ng-container matColumnDef="direction">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Direccion</th>
        <td mat-cell *matCellDef="let client">
          {{ client.direction }}
        </td>
      </ng-container>
      <ng-container matColumnDef="priceListId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Lista de Precio</th>
        <td mat-cell *matCellDef="let client">
          {{ getPriceListName(client.priceListId) }}
        </td>
      </ng-container>
      <ng-container matColumnDef="Accion">
        <th mat-header-cell *matHeaderCellDef>Accion</th>
        <td mat-cell *matCellDef="let client">
          <button mat-mini-fab color="primary" (click)="edit(client.id)" [disabled]="isUpdating">
            <mat-icon>edit</mat-icon>
          </button>
          <button mat-mini-fab (click)="delete(client.id)" [disabled]="isUpdating">
            <mat-icon>delete_forever</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let myRowData;columns:columnsToDisplay"></tr>
    </table>
  </mat-card-content>
</mat-card>
